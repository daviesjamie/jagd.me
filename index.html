<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <title>Jamie Davies</title>
    <link rel="stylesheet" type="text/css" href="jagd.css">
</head>

<body class="no-transitions">
    <div id="mode-toggle">
        <label class="switch">
            <input type="checkbox" onclick="toggleMode()">
            <span class="slider"></span>
        </label>
    </div>

    <div class="container">
        <div class="wrapper">
            <section id="greeting">
                <span>Hello</span>
            </section>

            <section id="info">
                <h3 class="section-title">Info</h3>
                <p>
                    I'm Jamie Davies, a full-stack developer who likes to mix
                    code, devops, design and coffee to create things that help
                    people. I currently work for
                    <a href="https://www.netcraft.com/">Netcraft</a> in the
                    lovely city of Bath, where I create and maintain systems to
                    fight malware and block phishing attacks on iOS.
                </p>
            </section>

            <section id="contact">
                <h3 class="section-title">Contact</h3>
                <ul>
                    <li>
                        <a href="mailto:hi@jagd.me">Email</a>
                    </li>
                    <li>
                        <a href="https://github.com/daviesjamie/">GitHub</a>
                    </li>
                    <li>
                        <a href="https://www.linkedin.com/in/daviesjamie/">LinkedIn</a>
                    </li>
                    <li>
                        <a href="https://www.strava.com/athletes/daviesjamie">Strava</a>
                    </li>
                </ul>
            </section>
        </div>
    </div>

    <script>
        const body   = document.querySelector('body');
        const toggle = document.querySelector('#mode-toggle input');

        function toggleMode() {
            setMode(toggle.checked ? 'light' : 'dark');
        }

        function setMode(mode) {
            localStorage.setItem('mode', mode);

            if (mode === 'light') {
                body.classList.add('light');
                toggle.checked = true;
            } else {
                body.classList.remove('light');
                toggle.checked = false;
            }
        }

        window.matchMedia('(prefers-color-scheme: light)').addListener(
            e => setMode(e.matches ? 'light' : 'dark')
        );

        window.onload = (event) => {
            let saved = localStorage.getItem('mode');
            let preferred = window.matchMedia('prefers-color-scheme: light').matches ? 'light' : 'dark';
            setMode(saved || preferred);

            // Enable transitions after we've set the initial state
            // Don't want to see the transitions on page load!
            setTimeout(() => body.classList.remove('no-transitions'), 300);
        }
    </script>
</body>
</html>